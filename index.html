<script>
    // Mantenha sua URL_API aqui
    const API_URL = 'SUA_URL_DO_APPS_SCRIPT_AQUI'; 

    async function verificar() {
        const id = document.getElementById('hash').value.trim();
        const res = document.getElementById('result');
        const loader = document.getElementById('loader');

        if (!id) return alert("Digite o código.");

        res.style.display = 'none';
        loader.style.display = 'block';

        try {
            const req = await fetch(`${API_URL}?id=${id}`);
            const json = await req.json();

            loader.style.display = 'none';
            res.style.display = 'block';

            if (json.status === 'success') {
                res.className = 'valid';
                // HTML Atualizado com o campo CPF
                res.innerHTML = `
                    <div style="color:#10b981; font-weight:bold; margin-bottom:10px">✅ Certificado Válido</div>
                    <span class="label">Aluno:</span> ${json.data.nome}
                    <span class="label">CPF:</span> ${json.data.cpf}
                    <span class="label">Curso:</span> ${json.data.curso}
                    <span class="label">Carga Horária:</span> ${json.data.carga_horaria}
                    <span class="label">Emissão:</span> ${json.data.data_emissao}
                `;
            } else {
                res.className = 'invalid';
                res.innerHTML = `<div style="color:#ef4444; font-weight:bold">❌ ${json.message}</div>`;
            }
        } catch (e) {
            loader.style.display = 'none';
            alert("Erro de conexão.");
        }
    }
</script>
